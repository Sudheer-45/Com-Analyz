/* --- Animations --- */
@keyframes fadeInUp {
    from { opacity: 0; transform: translateY(30px); }
    to   { opacity: 1; transform: translateY(0); }
}
@keyframes fadeIn {
    from { opacity: 0; }
    to   { opacity: 1; }
}
@keyframes shimmer-avatar {
    0%   { box-shadow: 0 2px 18px rgba(118,75,162,0.12); }
    80%  { box-shadow: 0 0px 32px #764ba250, 0 0px 0 #764ba230; }
    100% { box-shadow: 0 2px 18px rgba(118,75,162,0.12); }
}
@keyframes badge-pulse {
    0%   { box-shadow: 0 0 0 0 #c6f6d5, 0 0 0 0 #2f855a30; }
    70%  { box-shadow: 0 0 18px 6px #c6f6d5, 0 0 6px 1.5px #2f855a40; }
    100% { box-shadow: 0 0 0 0 #c6f6d5, 0 0 0 0 #2f855a30; }
}
@keyframes shimmer-move {
    0%{ left:-50%; }
    80%{ left:95%; }
    100%{ left:110%; }
}

/* --- Primary Layout --- */
.dashboard-page-container,
.page-container {
    max-width: 1300px; /* Slightly increased max-width for very large screens */
    margin: 0 auto;
    padding: 2.5rem 2rem;
    min-height: 100vh;
    background: linear-gradient(170deg, #f3f5ff 5%, #eef2f7 100%);
    animation: fadeIn 0.7s ease;
}

/* --- Header Section with Avatar --- */
.dashboard-page-header {
    text-align: center;
    margin-bottom: 3rem;
    animation: fadeInUp 0.5s ease-out; /* Added ease-out for smoother animation */
}
.dashboard-header-row {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1.2rem;
    margin-bottom: 0.4rem;
}
.dashboard-user-name {
    color: #764ba2;
    font-weight: 700;
}
.dashboard-avatar-shimmer {
    width: 80px;
    height: 50px;
    border-radius: 50%;
    background: linear-gradient(135deg, #667eea 10%, #764ba2 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 24px rgba(118,75,162,0.14);
    overflow: hidden;
    position: relative;
    animation: shimmer-avatar 2s linear infinite;
}
.dashboard-avatar-icon {
    color: #fff;
    font-size: 1.9rem;
    z-index: 2;
}

/* --- Metric Cards Section --- */
.metrics-overview {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); /* Min-width adjusted to give more room */
    gap: 2rem;
    margin-bottom: 3.5rem;
}
.metric-card {
    background: rgba(255,255,255,0.77);
    box-shadow: 0 4px 24px rgba(102,126,234,0.10);
    border-radius: 20px;
    padding: 1.5rem; /* Adjusted padding to be consistent */
    border: 1px solid rgba(200,210,250,0.19);
    backdrop-filter: blur(14px);
    transition: transform 0.18s ease, box-shadow 0.21s ease; /* Added ease for smoother transition */
    animation: fadeInUp 0.57s ease-out; /* Added ease-out */
    cursor: pointer;
}
.metric-card:hover {
    transform: translateY(-8px) scale(1.02); /* Adjusted scale for a subtle pop */
    box-shadow: 0 16px 40px rgba(102,126,234,0.18);
}
.metric-card-header {
    display: flex;
    align-items: center;
    gap: 0.7rem;
    margin-bottom: 0.7rem;
}
.metric-icon {
    font-size: 1.3rem;
    width: 36px; height: 36px;
    border-radius: 12px;
    display: flex; align-items: center; justify-content: center;
    flex-shrink: 0;
    margin-right: 7px; /* Spacing between icon and text */
    background: #edefff;
    color: #667eea;
}
.metric-value {
    font-size: 1.5rem;
    color: #2d3748;
    font-weight: 700;
    margin-bottom: 0.14rem;
    line-height: 1.1;
    letter-spacing: -0.02em;
    position: relative;
    /* Ensure text fits within the card */
    word-break: break-word; 
    white-space: normal;
}
.metric-value .badge-shimmer {
    content: ''; /* Added content property */
    display: block;
    position: absolute;
    left: -35%;
    top: 0; bottom: 0;
    width: 40%;
    background: linear-gradient(120deg, rgba(255,255,255,0.28) 30%, rgba(255,255,255,0.08) 80%);
    z-index: 1;
    border-radius: 2em;
    animation: shimmer-move 1.8s infinite;
    pointer-events: none;
}
/* Pulse/shimmer for excellent badges only */
.score-badge.badge-pulse {
    position: relative;
    animation: badge-pulse 1.1s ease-in-out infinite alternate;
    z-index: 1;
}
/* Utility/Status */
.metric-status {
    margin-top: 0.5rem;
    font-size: 0.95rem;
    font-weight: 600;
    border-radius: 6px;
    padding: 0.22rem 0.7rem;
    display: inline-block;
    color: #718096; /* Neutral default */
    background: #edf2f7; /* Neutral default */
}
.metric-status.good      { color: #25855a; background: #e6fbe9; }
.metric-status.excellent { color: #225666; background: #d8f5fd; }

/* --- Charts Section --- */
.dashboard-grid-v2 {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 2rem;
}
.chart-card-v2 {
    background: white;
    padding: 2rem;
    border-radius: 18px;
    border: 1px solid #e2e8f0;
    box-shadow: 0 8px 32px rgba(0,0,0,0.06);
    height: 350px; /* Fixed height for charts */
    position: relative; /* For Chart.js canvas positioning */
}
.chart-card-v2 canvas {
    max-height: 100%;
    max-width: 100%;
}
.chart-card-v2.main-chart {
    grid-column: 1/-1;
}

/* --- No Results Message --- */
.no-results-message {
    padding: 4rem 2rem;
    text-align: center;
}
.no-results-message p {
    font-size: 1.19rem;
    color: #818cab;
    margin-bottom: 1.5rem;
}

/* --- Action Buttons --- */
.view-report-btn,
.start-practice-btn {
    background: linear-gradient(135deg,#667eea 0%,#764ba2 100%);
    color: #fff;
    border: none;
    padding: 0.7rem 1.3rem;
    border-radius: 8px;
    font-weight: 600;
    font-size: 1.01rem;
    box-shadow: 0 2px 6px rgba(102,126,234,0.16);
    transition: transform 0.19s ease, box-shadow 0.18s ease;
    outline: none;
    cursor: pointer;
    margin: 0.5rem 0;
}
.view-report-btn:hover,
.start-practice-btn:hover {
    transform: translateY(-2.5px) scale(1.04);
    box-shadow: 0 8px 28px rgba(118,75,162,0.11);
}

/* --- Results/History Table (if needed) --- */
.results-table-container {
    background: #fff;
    border-radius: 18px;
    border: 1px solid #e2e8f0;
    overflow: hidden;
    box-shadow: 0 4px 16px rgba(28,40,70,0.04);
}
table { width: 100%; border-collapse: collapse; }
th, td { padding: 1.1rem 1.35rem; text-align: left; border-bottom: 1px solid #f1f2f7; }
thead { background-color: #f7fafc; }
th { font-size: 0.84rem; font-weight: 700; color: #7f8aad; text-transform: uppercase; letter-spacing: 0.04em; }
tbody tr { transition: background-color 0.16s ease; }
tbody tr:hover { background-color: #f6fafd; }
tbody tr:last-child td { border-bottom: none; }

/* --- Global Utility --- */
.score-badge {
    padding: 0.4rem 1rem;
    border-radius: 2em;
    font-weight: 700;
    font-size: 1.07rem;
    background: #eefaf4;
    display: inline-block;
    position: relative;
    z-index: 1;
}
.score-badge.excellent { background: #c6f6d5; color: #25855a; }
.score-badge.good      { background: #bee3f8; color: #2c5282; }


/* --- Responsive Adjustments --- */

/* Tablet and smaller desktops */
@media screen and (max-width: 1800px) {
    .dashboard-avatar-shimmer{
        width: 50px;
        border-radius: 50%;
    }
    
}
@media screen and (max-width: 1200px) {
    .dashboard-page-container, .page-container {
        padding: 2rem 1.5rem; /* Reduce horizontal padding */
    }
    .dashboard-avatar-shimmer{
        width: 50px;
        border-radius: 50%;
    }
}

/* Tablets (landscape) and large phones */
@media screen and (max-width: 900px) {
    .dashboard-grid-v2 {
        grid-template-columns: 1fr; /* Charts stack vertically */
    }
    .chart-card-v2.main-chart {
        grid-column: auto; /* Remove spanning */
    }
    .metrics-overview {
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); /* Allow cards to get smaller */
        gap: 1.5rem; /* Reduce gap */
    }
    .metric-card {
        padding: 1.2rem; /* Reduce padding inside cards */
    }
    .metric-card h4 {
        font-size: 0.9rem;
    }
    .metric-value {
        font-size: 2rem; /* Make values slightly smaller */
    }
    .metric-icon {
        width: 32px; /* Make icon wrapper smaller */
        height: 32px;
        font-size: 1.2rem;
    }
}

/* Small Phones */
@media screen and (max-width: 600px) {
    .page-container {
        padding: 1.5rem; /* Even less padding */
    }
    .dashboard-page-header h2 {
        font-size: 2.2rem;
    }
    .metrics-overview {
        grid-template-columns: 1fr; /* Stack all metric cards vertically */
        gap: 1rem;
    }
    .metric-card {
        flex-direction: column; /* Stack icon and content vertically */
        text-align: center;
        gap: 0.5rem;
        padding: 1.2rem;
    }
    .metric-card-header {
        flex-direction: column;
        gap: 0.5rem;
        margin-bottom: 0.5rem;
    }
    .metric-icon {
        margin-right: 0;
        width: 40px; /* Adjust size for mobile */
        height: 40px;
        font-size: 1.5rem;
    }
    .metric-content h4 {
        margin-bottom: 0.25rem;
    }
    .metric-content .metric-value {
        font-size: 1.8rem;
    }
    .chart-card-v2 {
        padding: 1.2rem;
    }
    .dashboard-grid-v2 {
        gap: 1.5rem;
    }
}

@media screen and (max-width: 470px) {
    .dashboard-avatar-shimmer{
        width: 80px;
        border-radius: 50%;
    }   
}

/* Very Small Phones (e.g., iPhone SE) */
@media screen and (max-width: 400px) {
    .dashboard-avatar-shimmer{
        width: 80px;
        border-radius: 50%;
    }
    .page-container {
        padding: 1rem;
    }
    .page-header h2 {
        font-size: 1.8rem;
    }
    .page-header p {
        font-size: 1rem;
    }
    .metrics-overview {
        gap: 0.75rem;
    }
    .metric-card {
        padding: 1rem;
    }
    .metric-content .metric-value {
        font-size: 1.6rem;
    }
    .chart-card-v2 {
        padding: 1rem;
    }
}